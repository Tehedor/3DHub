{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useGeolocated = void 0;\nconst react_1 = require(\"react\");\n/**\n * Hook abstracting away the interaction with the Geolocation API.\n * @param config - the configuration to use\n */\nfunction useGeolocated(config = {}) {\n  const {\n    positionOptions = {\n      enableHighAccuracy: true,\n      maximumAge: 0,\n      timeout: Infinity\n    },\n    isOptimisticGeolocationEnabled = true,\n    userDecisionTimeout = undefined,\n    suppressLocationOnMount = false,\n    watchPosition = false,\n    geolocationProvider = typeof navigator !== \"undefined\" ? navigator.geolocation : undefined,\n    watchLocationPermissionChange = false,\n    onError,\n    onSuccess\n  } = config;\n  const userDecisionTimeoutId = (0, react_1.useRef)(0);\n  const isCurrentlyMounted = (0, react_1.useRef)(true);\n  const watchId = (0, react_1.useRef)(0);\n  const [isGeolocationEnabled, setIsGeolocationEnabled] = (0, react_1.useState)(isOptimisticGeolocationEnabled);\n  const [coords, setCoords] = (0, react_1.useState)();\n  const [timestamp, setTimestamp] = (0, react_1.useState)();\n  const [positionError, setPositionError] = (0, react_1.useState)();\n  const [permissionState, setPermissionState] = (0, react_1.useState)();\n  const cancelUserDecisionTimeout = (0, react_1.useCallback)(() => {\n    if (userDecisionTimeoutId.current) {\n      window.clearTimeout(userDecisionTimeoutId.current);\n    }\n  }, []);\n  const handlePositionError = (0, react_1.useCallback)(error => {\n    cancelUserDecisionTimeout();\n    if (isCurrentlyMounted.current) {\n      setCoords(() => undefined);\n      setIsGeolocationEnabled(false);\n      setPositionError(error);\n    }\n    onError === null || onError === void 0 ? void 0 : onError(error);\n  }, [onError, cancelUserDecisionTimeout]);\n  const handlePositionSuccess = (0, react_1.useCallback)(position => {\n    cancelUserDecisionTimeout();\n    if (isCurrentlyMounted.current) {\n      setCoords(position.coords);\n      setTimestamp(position.timestamp);\n      setIsGeolocationEnabled(true);\n      setPositionError(() => undefined);\n    }\n    onSuccess === null || onSuccess === void 0 ? void 0 : onSuccess(position);\n  }, [onSuccess, cancelUserDecisionTimeout]);\n  const getPosition = (0, react_1.useCallback)(() => {\n    if (!geolocationProvider || !geolocationProvider.getCurrentPosition || !geolocationProvider.watchPosition) {\n      throw new Error(\"The provided geolocation provider is invalid\");\n    }\n    if (userDecisionTimeout) {\n      userDecisionTimeoutId.current = window.setTimeout(() => {\n        handlePositionError();\n      }, userDecisionTimeout);\n    }\n    if (watchPosition) {\n      watchId.current = geolocationProvider.watchPosition(handlePositionSuccess, handlePositionError, positionOptions);\n    } else {\n      geolocationProvider.getCurrentPosition(handlePositionSuccess, handlePositionError, positionOptions);\n    }\n  }, [geolocationProvider, watchPosition, userDecisionTimeout, handlePositionError, handlePositionSuccess, positionOptions]);\n  (0, react_1.useEffect)(() => {\n    let permission;\n    if (watchLocationPermissionChange && geolocationProvider && \"permissions\" in navigator) {\n      navigator.permissions.query({\n        name: \"geolocation\"\n      }).then(result => {\n        permission = result;\n        permission.onchange = () => {\n          setPermissionState(permission.state);\n        };\n      }).catch(e => {\n        console.error(\"Error updating the permissions\", e);\n      });\n    }\n    return () => {\n      if (permission) {\n        permission.onchange = null;\n      }\n    };\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n  (0, react_1.useEffect)(() => {\n    if (!suppressLocationOnMount) {\n      getPosition();\n    }\n    return () => {\n      cancelUserDecisionTimeout();\n      if (watchPosition && watchId.current) {\n        geolocationProvider === null || geolocationProvider === void 0 ? void 0 : geolocationProvider.clearWatch(watchId.current);\n      }\n    };\n  }, [permissionState]); // eslint-disable-line react-hooks/exhaustive-deps\n  return {\n    getPosition,\n    coords,\n    timestamp,\n    isGeolocationEnabled,\n    isGeolocationAvailable: Boolean(geolocationProvider),\n    positionError\n  };\n}\nexports.useGeolocated = useGeolocated;","map":{"version":3,"names":["Object","defineProperty","exports","value","useGeolocated","react_1","require","config","positionOptions","enableHighAccuracy","maximumAge","timeout","Infinity","isOptimisticGeolocationEnabled","userDecisionTimeout","undefined","suppressLocationOnMount","watchPosition","geolocationProvider","navigator","geolocation","watchLocationPermissionChange","onError","onSuccess","userDecisionTimeoutId","useRef","isCurrentlyMounted","watchId","isGeolocationEnabled","setIsGeolocationEnabled","useState","coords","setCoords","timestamp","setTimestamp","positionError","setPositionError","permissionState","setPermissionState","cancelUserDecisionTimeout","useCallback","current","window","clearTimeout","handlePositionError","error","handlePositionSuccess","position","getPosition","getCurrentPosition","Error","setTimeout","useEffect","permission","permissions","query","name","then","result","onchange","state","catch","e","console","clearWatch","isGeolocationAvailable","Boolean"],"sources":["/home/sergio/Documents/fronted/projectfronted/node_modules/react-geolocated/dist-modules/index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useGeolocated = void 0;\nconst react_1 = require(\"react\");\n/**\n * Hook abstracting away the interaction with the Geolocation API.\n * @param config - the configuration to use\n */\nfunction useGeolocated(config = {}) {\n    const { positionOptions = {\n        enableHighAccuracy: true,\n        maximumAge: 0,\n        timeout: Infinity,\n    }, isOptimisticGeolocationEnabled = true, userDecisionTimeout = undefined, suppressLocationOnMount = false, watchPosition = false, geolocationProvider = typeof navigator !== \"undefined\"\n        ? navigator.geolocation\n        : undefined, watchLocationPermissionChange = false, onError, onSuccess, } = config;\n    const userDecisionTimeoutId = (0, react_1.useRef)(0);\n    const isCurrentlyMounted = (0, react_1.useRef)(true);\n    const watchId = (0, react_1.useRef)(0);\n    const [isGeolocationEnabled, setIsGeolocationEnabled] = (0, react_1.useState)(isOptimisticGeolocationEnabled);\n    const [coords, setCoords] = (0, react_1.useState)();\n    const [timestamp, setTimestamp] = (0, react_1.useState)();\n    const [positionError, setPositionError] = (0, react_1.useState)();\n    const [permissionState, setPermissionState] = (0, react_1.useState)();\n    const cancelUserDecisionTimeout = (0, react_1.useCallback)(() => {\n        if (userDecisionTimeoutId.current) {\n            window.clearTimeout(userDecisionTimeoutId.current);\n        }\n    }, []);\n    const handlePositionError = (0, react_1.useCallback)((error) => {\n        cancelUserDecisionTimeout();\n        if (isCurrentlyMounted.current) {\n            setCoords(() => undefined);\n            setIsGeolocationEnabled(false);\n            setPositionError(error);\n        }\n        onError === null || onError === void 0 ? void 0 : onError(error);\n    }, [onError, cancelUserDecisionTimeout]);\n    const handlePositionSuccess = (0, react_1.useCallback)((position) => {\n        cancelUserDecisionTimeout();\n        if (isCurrentlyMounted.current) {\n            setCoords(position.coords);\n            setTimestamp(position.timestamp);\n            setIsGeolocationEnabled(true);\n            setPositionError(() => undefined);\n        }\n        onSuccess === null || onSuccess === void 0 ? void 0 : onSuccess(position);\n    }, [onSuccess, cancelUserDecisionTimeout]);\n    const getPosition = (0, react_1.useCallback)(() => {\n        if (!geolocationProvider ||\n            !geolocationProvider.getCurrentPosition ||\n            !geolocationProvider.watchPosition) {\n            throw new Error(\"The provided geolocation provider is invalid\");\n        }\n        if (userDecisionTimeout) {\n            userDecisionTimeoutId.current = window.setTimeout(() => {\n                handlePositionError();\n            }, userDecisionTimeout);\n        }\n        if (watchPosition) {\n            watchId.current = geolocationProvider.watchPosition(handlePositionSuccess, handlePositionError, positionOptions);\n        }\n        else {\n            geolocationProvider.getCurrentPosition(handlePositionSuccess, handlePositionError, positionOptions);\n        }\n    }, [\n        geolocationProvider,\n        watchPosition,\n        userDecisionTimeout,\n        handlePositionError,\n        handlePositionSuccess,\n        positionOptions,\n    ]);\n    (0, react_1.useEffect)(() => {\n        let permission;\n        if (watchLocationPermissionChange &&\n            geolocationProvider &&\n            \"permissions\" in navigator) {\n            navigator.permissions\n                .query({ name: \"geolocation\" })\n                .then((result) => {\n                permission = result;\n                permission.onchange = () => {\n                    setPermissionState(permission.state);\n                };\n            })\n                .catch((e) => {\n                console.error(\"Error updating the permissions\", e);\n            });\n        }\n        return () => {\n            if (permission) {\n                permission.onchange = null;\n            }\n        };\n    }, []); // eslint-disable-line react-hooks/exhaustive-deps\n    (0, react_1.useEffect)(() => {\n        if (!suppressLocationOnMount) {\n            getPosition();\n        }\n        return () => {\n            cancelUserDecisionTimeout();\n            if (watchPosition && watchId.current) {\n                geolocationProvider === null || geolocationProvider === void 0 ? void 0 : geolocationProvider.clearWatch(watchId.current);\n            }\n        };\n    }, [permissionState]); // eslint-disable-line react-hooks/exhaustive-deps\n    return {\n        getPosition,\n        coords,\n        timestamp,\n        isGeolocationEnabled,\n        isGeolocationAvailable: Boolean(geolocationProvider),\n        positionError,\n    };\n}\nexports.useGeolocated = useGeolocated;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}